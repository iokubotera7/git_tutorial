## SQL
データベースから必要なデータを取得する言語
RDBに問い合わせるとデータが返ってくる  

## SQLがデータ分析で必要な理由
データ分析をするうえで、必要なデータを自分で収集するために使うから  

## データベースとは


sql-project-386714


## 外部結合
外部結合では、結合元のテーブルのデータはすべて残し、結合先のテーブルの値がある場合は、そのまま結合し、
値がない場合にはnullが入る。  

## サブクエリ
サブクエリとは、別のSQLクエリの実行結果を再利用すること  
⇒クエリの中にクエリを記述すること  

## 仮想テーブル
必要なときにクエリを実行できるクエリ（関数みたいな？？）  

WITH句をつかうことで、仮想テーブルを作成できる  

## 代表値の使い分け
平均値：分布が正規分布に近い場合、単純平均に適しているので、平均値を代表値とする
中央値：分布に外れ値が含まれている場合、平均値は使えないので、中央値が適している。
最頻値：あるデータの分布のみ突出している場合、最頻値が代表値に適している  

## 散布度

## 範囲：レンジ
データにおける最大値と最小値
## 偏差と分散
偏差とは、各データから平均値を引いた値  
偏差 = x - 平均値  

偏差を二乗して足し上げた値を偏差平方和という  
偏差平方和をデータ数で割れば、分散となる  
2つの集団のばらつきを比較できる  

平均からの距離 = 偏差  
分散のルートをとると、標準偏差になる  

例えば、以下の身長のデータがあった場合、  
平均：156.6cm  
分散：29.2   
標準偏差：5.4  
上記の場合、平均156.6cmから±5.4cm内に約68%の人数が当てはまるということになる  
⇒なんでXX%の値が標準偏差内に含まれるのだろうか？  


標準偏差が大きい：データのばらつきが多いということ
標準偏差が小さい：データのばらつきが少ないということ  

あるべき姿：従業員にとって、「働き甲斐がある会社」にしたい。「働き甲斐がある」と回答した社員が全体TOP２で７０％以上になりたい  

## データ分析
あるべき姿と分析目標を明確にする  

データ分析のポイント  

あるべき姿  
問題  
* 何が問題なのか
* なぜ問題が起きているのか
* どのように問題を解決するのか
* 何の問題から解決すべきなのか
解決策  

## 分析のポイント
* 分析目標を明確にする  
* 比較する
  * 相関を見る
  　　* 擬似相関に気を付ける
  * 原因を見つける（因果関係を見る）
    * 因果関係に含まれる根本原因が本当に根本原因かきちんと考えるべき
  * 単なる偶然
    * 発見した相関や因果に再現性がない場合、単なる偶然となる  
    * 


## 問題解決につながる分析のポイント２０
1. 現状分析はまず、ありたい姿、現状、問題の３つを把握する
2. さらに問題を何が問題か、なぜ問題が起きているのか、どのように問題を解決するのか、何の問題から解決するのか、の４つの視点で分析する
3. WHATは数字で、WHYは言葉で把握する
4. 数字 + 言葉 = 事実になる
5. 解決策の優先順位はビジネスインパクト * 実現可能性で考える
6. クロス集計では、結果に差が出そうな比較軸をあらかじめ想定しておくことが大切
7. 構造化は重なりに意味があることもある
8. 相関がみられたら、擬似相関を疑う
9. 関係性分析では、相関をみつけ、根本原因を抽出することが重要
10. 集団の特徴を表す数字には、代表値と散布度がある
11. 代表値である平均値・中央値・最頻値はデータの分布によって使い分ける
12. 最重要課題を見つけ、解決策を提案するのが、問題解決につながる分析

## データサイエンスとは
データから有用な情報・知識を引き出すための原理

## データマイニング
データサイエンスに基づく方法を活用して、でーたから有用な情報・知識を引き出すこと  

CRISP-DM(データマイニングプロセス)  

データ分析の中にデータマイニング、統計学、機械学習が含まれる  

## データ分析を活用したビジネス貢献
* 仮説検証による意思決定
  * とある施策の有効性を検証して継続の可否を助言
  * 現状のデータに基づいて有効な施策の提案と実行の確約
* モデル構築によるシステム自動化

## 統計と機械学習
* 統計学
  * ビジネスでは２つの統計がある
    * データから関心のある数値を算出する統計
      * 毎月の売り上げの平均を求める
      * 各事業所ごとの従業員の中央値を求める
    * 研究分野としての統計学
      * 記述統計：平均などの要約量を求めてデータの特徴を表現する
      * 推論統計：部分的なデータから全体の様子を推定する（検定など）
 * 機械学習
 
 ## 確率と事象
 事象：発生している出来事
 確率：事象が発生する回数/全事象が起こる場合の数  
 
 ## 確率変数と分布関数
 何等かの事象を入力すると、その確率が得られる関数を分布関数という。  
 確率変数とは、分布関数での確率に関する変数  
 
 期待値とは、すべての確率変数Xと分布関数P(X)の積の和  
 E(x) = siguma xP(x)  
 
 確率変数がどのくらいの値をとりそうかを考えるときに使う。  
 
 範囲に応じた確率を求める関数が確率密度関数という。  
 たとえば、企業の利益を確率変数とし、
 利益が1000万～3000万になる確率なら、この範囲の密度関数の下側の面積を求める  
 確率P(1000~3000)f(x)dx
 
 確率密度関数は、過去の経験から求めたり、事前に仮定したりする  
 
 期待値とは、１回やってみたときに、どれくらいのスコアが期待できるか、を考えること。  
 例えば、コイントスをして、表なら１点、裏なら０点のゲームがあった際に、表・裏が出る確率は0.5である場合、  
 １回のコイントスで手に入る得点はどのくらいになるのかを予測する際に期待値が使われる。  
 
 E(x) = 1 * 0.5 + 0 * 0.5
 となる。  
 
 また、さいころを１個振った時に出る目の期待値を求めるなら、  
 サイコロの各目が出る確率は1/6、確率変数は1～6の値をとるので、
 
 E(x) = 1 * 1/6 + 2 * 1/6 + 3 * 1/6 + 4 * 1/6 + 5 * 1/6 + 6 * 1/6
  = 7/2
  = 3.5
  となる。
  
  袋の中に赤玉６個、白玉３個、青玉１個がある。
  赤玉を引くと０円、白玉を引くと３００円、青玉を引くと１０００円もらえる。
  参加費が２００円のときに、このゲームに参加するのは得か、期待値で判断する場合、
  
  E(x) = (0 * 6/ 10 + 300 * 3/10 + 1000 * 1/10)
  = (90 + 100)
  = 190
  
  190 - 200
  = -10
  
  よって、１９０円しか見込めないから１０円損する期待値となる
 
 ## 推計統計
 データの背後にある全体の仕組みを推論する
 
 集めたデータは全データの一部であり、集めたデータから元の全データの性質を推測する
 
* 標本:集めたデータ（全体の一部）
* 母集団：標本のもととなる全体データ

つまり、母集団の一部のデータである標本から、母集団のデータの性質を推測するのが推計統計
 
 
## 母集団と標本
統計学では、問いの対象・知りたいことである母集団を標本から推測することが重要なテーマ  

## ヒストグラム
変数を可視化する基本の図  
x軸に変数の値をある一定の区間で区切る階級、y軸にその区間内に含まれている数値である度数が入っている。  

## 散布図
２つの変数の関係を可視化する図

## 記述統計
数十、数百の変数の中から代表している値を見つけること

## 代表値
その変数を代表する値
⇒数十、数百の変数の中から代表している値のこと。（平均、中央値、最頻値など）  


## 平均偏差
変数における平均的な中央値との距離
つまり、中央値からどのくらい変数が離れているのかがわかる
平均偏差= 各値と中央値の距離の合計 / 標本の大きさ  
= 4 + 0 + 2/ 3 = 2

## 分散
平均値から各変数のばらつきがどの程度なのかを表す指標  

2乗することで、計算が楽になる。  
⇒2乗することで、符号を意識しなくてよくなる。  

## 標準偏差
分散が平均値からばらついた値の２乗分離れていることを尺度を合すことができる  
標本から求めた分散を標本分散という。  

## 標準化
特定の平均と標準偏差となるような変数の変換
⇒２つの変数同士を比較する場合、それぞれの変数にはばらばらの平均と標準偏差であることが多い。
これでは、どちらの変数が優れているのか比較することができない。  
そのため、両変数の平均と標準偏差を統一することで、比較することができる。  
これを標準化という。  

方法は、  
1. 変数を平均で引く
2. 標準偏差で割る

## 点推定
標本統計量(推定量)で母数をピンポイントに推定する  

母集団には、母平均、母分散、母標準偏差などの母集団を特徴づける母数という値がある。これらを真値とも呼ぶ。  
対して、標本にも標本データ内で算出した標本平均、標本分散、不偏分散、標本標準偏差などのことを標本統計量という。  
は、標本データごとにこれらの値が変わることから、変動とも呼ぶ  
これらの標本統計量から母数をピンポイントで推定することを点推定という。  

## 不偏性
母集団から抽出した標本の標本統計量の期待値が母数と一致する性質  

# データロード
Snowflakeでは、以下からのデータをSnowflakeにアップロードすることができる。
* ローカルデータ
* Amazon S3
* Google Cloud Storage
* Microsoft Azure

## データロードの手順
1. PUTコマンドを使用して、データファイルをデータロードの中間領域にアップロード（ステージング）する。
2. COPY INTO <テーブル>コマンドを使用して、ステージングされたファイルの内容をSnowflakeデータベーステーブルにアップロードする。

すなわち、S3⇒ステージング⇒テーブルの順番になる、  
このとき、ステージングからテーブルまでのデータのアップロードにCOPY INTO <テーブル>が用いられる。

まずは、PUTコマンドでファイルをステージングへ、ステージングにあるデータをCOPY INTO <テーブル>でテーブルへ。

1. createコマンドで内部ステージを作成
2. putコマンドでステージへファイルをアップロード
3. copy into コマンドでステージからsnowflakeのテーブルへアップロード


データをロードするには、ウェアハウスが必要。  

どのサブネットがどのインタネーットゲートウェイとつながっているのを記載。

EgressインターネットGW：IPv6専用のインターネットGW  


キャリアゲートウェイ：5G専用のゲートウェイ

Elastic IPアドレス：固定IPアドレス

マネージドプレフィックスリスト：IPアドレス範囲をリストとして設定する
エンドポイントはVPCの外のAWSのサービスとやり取りする。
エンドポイントサービスの作成：VPCのサービスを他のAWSアカウントを利用させるための設定

NATゲートウェイ：プライベートサブネットからのインターネット外へのトラフィック転送の機能。

ピアリング接続：VPC同士の接続に用いる。

ネットワークACL：VPCへのトラフィックの許可・拒否の設定
セキュリティグループ：インスタンス用のセキュリティ設定
Route53 Resolver DNS Firewall： DNSクエリのセキュリティ
AWS Network Firewall：VPCのファイアウォール。Network Firewall用のサブネットを作成し、Firewallが許可したトラフィックのみサブネットに転送する。  
カスタマーゲートウェイ：VPNや専用線接続などを用いて、オンプレミス環境との接続に用いる。
仮想プライベートゲートウェイ：VPNで接続するのに用いる。
VPN接続：VPCとVPNで接続するのに用いる。
Transit Gateway：複数のVPC間の接続に用いる。
Network Manager：VPCへのアクセス状況の確認やネットワークの全体的な管理、セキュリティの確認等が可能。  


AZ：データセンタの場所。冗長化を考えると複数あった方がいい。ap-XXX、ap-XXXみたいなの

ルートテーブルはルータの中に配置される。
そのため、パブリックサブネットを作成するためには、サブネット内のルータとインターネットGW内のルータそれぞれのルートテーブに  
ルーティングする必要がある。  

すべてのIPアドレス（ループバックアドレスを除く）0.0.0.0はインターネットGWに転送する。

IPマスカレード：複数のプライベートIPアドレスをグローバルIPアドレスに変換する。  

プライベートサブネットへのダイレクトなインターネットからのインバウンド通信は不可。
そんため、インターネットからのインバウンド通信には、パブリックサブネットに踏み台サーバを設置し、  
台サーバを経由してプライベートサブネットへアクセスする。  
プライベートサブネットからインターネットへのアウトバウンド通信は、NATゲートウェイを介して通信する。  
